<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Cojoden</title>
    <H1>Recherche de musées.</h1>

    <!-- Pour appeler des API en javascipt -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    
    <!-- Code d'appel aux recherches de données -->
    <script src="/static/cojoden_search.js"></script>
    
    <link rel="stylesheet" type="text/css" href="/static/dashboard.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/novus/nvd3/v1.8.1/build/nv.d3.css">

  </head>

  <body>

    <div class="content">
      <header>
        <div class="title">
          <h1 >
            <table>
              <tr>
                <td>
                  <a href="/">
                    <img src="/static/cojoden_app_img.png" width="80%" height="80%">
                  </a>
                </td>
                <td>
                  Recherche de musées par : oeuvre, artiste ou localisation
                </td>
              </tr>
            </table>
          </h1>
        </div>
      </header>
      <main>
        <div class="error_container">
          <p style="color:#da1313;" id="errors"></p>
        </div>
        <div class="chartContainer">
            <table>
              <tr>
                  <td>
                          <tr style="background-color:#000dff">
                            <th colspan="3"><span style="color:#ffffff;font: size 15px;"><b>Oeuvre :</b></span></th>
                          </tr>
                          <tr>
                            <td>Mot clé :</td>
                            <td></td>
                            <td><input id="oeuvre_text" name="oeuvre_text" value="" > (sera recherché dans le titre, l'inscription et le texte de l'oeuvre)&nbsp;</input></td>
                          </tr>
                          <tr>
                            <td>Année :</td>
                            <td></td>
                            <td><input id="oeuvre_year" name="oeuvre_year" value='1781' > (année de création de l'oeuvre)&nbsp;</input></td>
                          </tr>
                          <tr>
                            <td>Type :</td>
                            <td></td>
                            <td>
                              <SELECT id="oeuvre_type" name="oeuvre_type" size="1">
                                <OPTION value="None">None</option>
                                <OPTION value="Sculpture" selected>Sculpture</option>
                                <OPTION value="type2">type2</option>
                              </SELECT>
                              (Type d'oeuvre) &nbsp
                            </td>
                          </tr>
                          <tr>
                            <td>Domaine :</td>
                            <td></td>
                            <td> 
                              <SELECT id="oeuvre_domaine" name="oeuvre_domaine" size="1">
                                <OPTION value="None">None</option>
                                <OPTION value="Sculpture" selected>Sculpture</option>
                                <OPTION value="type2">type2</option>
                              </SELECT>
                              (Thème de l'oeuvre)
                            </td>
                          </tr>
                          <tr style="background-color:#000dff">
                            <th colspan="3"><span style="color:#ffffff;font: size 15px;"><b>Artiste :</b></span></th>
                          </tr>
                          <tr>
                            <td>Mot clé :</td>
                            <td></td>
                            <td><input id="artiste_text" name="artiste_text" value='RAOUL' > (Nom ou Prénom de l'artiste) &nbsp;</input></td>
                          </tr>
                          <tr>
                            <td>Role / Métier :</td>
                            <td></td>
                            <td><input id="artiste_role" name="artiste_role" value='Sculpteur' > (Métier / Rôle de l'artiste) &nbsp;</input></td>
                          </tr>
                          <tr style="background-color:#000dff">
                            <th colspan="3"><span style="color:#ffffff;font: size 15px;"><b>Musée :</b></span></th>
                          </tr>
                          <tr>
                            <td>Ville :</td>
                            <td></td>
                            <td><input id="mussee_city" name="mussee_city" value='' > (ville recherchée) &nbsp;</input></td>
                          </tr>
                          <tr>
                            <td>Latitude :</td>
                            <td></td>
                            <td><input id="coord_lat" name="coord_lat" value='35' > ° &nbsp;</input></td>
                          </tr>
                          <tr>
                            <td>Longitude :</td>
                            <td></td>
                            <td><input id="coord_long" name="coord_long" value='-119' > ° &nbsp;</input></td>
                          </tr>
                          <tr>
                            <script src="/static/cojoden_geolog.js"></script>
                            <td colspan="3"><button id="'geoloc" name="'geoloc" onclick="getLocation()">Geolocaliser-moi</button></td>
                          </tr>
                          <tr>
                            <td>Nombre de musée :</td>
                            <td></td>
                            <td><input id="mussee_nb" name="mussee_nb" value='3' > (nombre de musée recherché à proximité)&nbsp;</input></td>
                          </tr>
                          <tr style="background-color:#000dff">
                            <th colspan="3"><span style="color:#ffffff;font: size 15px;"><b>Recherche :</b></span></th>
                          </tr>
                          <tr>
                            <td>Niveau de recherche :</td>
                            <td></td>
                            <td> 
                              <SELECT id="search_level" name="search_level" size="1">
                                <OPTION value="1" selected>1</option>
                                <OPTION value="2">2</option>
                                <OPTION value="3">3</option>
                              </SELECT>
                              (de 1 à 3)
                            </td>
                          </tr>
                        </table>
                      </div>
                  </td>
                  <td>
                      <button type="submit" class="button"><b>Lancer la recherche &rarr;</b></button>
                  </td>
                </form>
                <td>
                  <div id="resultat_recherche" class="recherche_resultat">
                    <p>
                      <!-- Afficher le résultat -->
                      <script>

                        var parameters = location.search.substring(1).split("&");
                        console.log("parameters:" + parameters)
                        if (parameters == null || parameters.length==0){
                          document.write("Cliquez sur le bouton pour lancer la recherche.");
                        }else{
                          
                          var temp = parameters[0].split("=");
                          console.log("temp:"+temp)
                          if(temp == null){
                            document.write("Cliquez sur le bouton pour lancer la recherche..");

                          }else{
                            prediction = unescape(temp[1]);
                            console.log("prediction:"+prediction)
                            if(prediction == null || prediction == 'undefined'){
                              document.write("Cliquez sur le bouton pour lancer la recherche...");
                            }else {
                              document.write(prediction);
                            }
                          }
                        }
                      </script>
                    </p>
                  </div>
                </td>
              </tr>
            </table>
        </div>

      </main>
    </div>

  </body>
</html>